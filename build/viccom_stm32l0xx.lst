ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"viccom_stm32l0xx.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.VICCOM_stm_init,"ax",%progbits
  16              		.align	1
  17              		.global	VICCOM_stm_init
  18              		.arch armv6s-m
  19              		.syntax unified
  20              		.code	16
  21              		.thumb_func
  22              		.fpu softvfp
  24              	VICCOM_stm_init:
  25              	.LVL0:
  26              	.LFB42:
  27              		.file 1 "mcu-bsp/lib/src/viccom_stm32l0xx.c"
   1:mcu-bsp/lib/src/viccom_stm32l0xx.c **** #include <stdint.h>
   2:mcu-bsp/lib/src/viccom_stm32l0xx.c **** #include "stdint.h"
   3:mcu-bsp/lib/src/viccom_stm32l0xx.c **** #include <stdint.h>
   4:mcu-bsp/lib/src/viccom_stm32l0xx.c **** #include "stdbool.h"
   5:mcu-bsp/lib/src/viccom_stm32l0xx.c **** #include "stm32l011xx.h"
   6:mcu-bsp/lib/src/viccom_stm32l0xx.c **** #include "../inc/viccom.h"
   7:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
   8:mcu-bsp/lib/src/viccom_stm32l0xx.c **** void VICCOM_stm_init(viccom_t* state, uint8_t address) {
  28              		.loc 1 8 56 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
   9:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     state->address = address;
  33              		.loc 1 9 5 view .LVU1
  34              		.loc 1 9 20 is_stmt 0 view .LVU2
  35 0000 0170     		strb	r1, [r0]
  10:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     state->addressFlag = false;
  36              		.loc 1 10 5 is_stmt 1 view .LVU3
  37              		.loc 1 10 24 is_stmt 0 view .LVU4
  38 0002 0023     		movs	r3, #0
  39 0004 4370     		strb	r3, [r0, #1]
  11:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     state->currentState = STATE_WAITING_FOR_ADDRESS;
  40              		.loc 1 11 5 is_stmt 1 view .LVU5
  41              		.loc 1 11 25 is_stmt 0 view .LVU6
  42 0006 0A22     		movs	r2, #10
  43 0008 FF32     		adds	r2, r2, #255
  44 000a 8354     		strb	r3, [r0, r2]
  12:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  13:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  14:mcu-bsp/lib/src/viccom_stm32l0xx.c **** }
ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 2


  45              		.loc 1 14 1 view .LVU7
  46              		@ sp needed
  47 000c 7047     		bx	lr
  48              		.cfi_endproc
  49              	.LFE42:
  51              		.section	.text.VICCOM_uartHandler,"ax",%progbits
  52              		.align	1
  53              		.global	VICCOM_uartHandler
  54              		.syntax unified
  55              		.code	16
  56              		.thumb_func
  57              		.fpu softvfp
  59              	VICCOM_uartHandler:
  60              	.LVL1:
  61              	.LFB43:
  15:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  16:mcu-bsp/lib/src/viccom_stm32l0xx.c **** void VICCOM_uartHandler(viccom_t *state) {
  62              		.loc 1 16 42 is_stmt 1 view -0
  63              		.cfi_startproc
  64              		@ args = 0, pretend = 0, frame = 0
  65              		@ frame_needed = 0, uses_anonymous_args = 0
  66              		@ link register save eliminated.
  17:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  18:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     int data = LPUART1->RDR;
  67              		.loc 1 18 5 view .LVU9
  68              		.loc 1 18 23 is_stmt 0 view .LVU10
  69 0000 0F4B     		ldr	r3, .L6
  70 0002 5A6A     		ldr	r2, [r3, #36]
  71              	.LVL2:
  19:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     if(state->currentState == STATE_WAITING_FOR_ADDRESS && data & 0x100) {
  72              		.loc 1 19 5 is_stmt 1 view .LVU11
  73              		.loc 1 19 13 is_stmt 0 view .LVU12
  74 0004 0A23     		movs	r3, #10
  75 0006 FF33     		adds	r3, r3, #255
  76 0008 C35C     		ldrb	r3, [r0, r3]
  77              		.loc 1 19 7 view .LVU13
  78 000a 002B     		cmp	r3, #0
  79 000c 0AD1     		bne	.L3
  80              		.loc 1 19 57 discriminator 1 view .LVU14
  81 000e D105     		lsls	r1, r2, #23
  82 0010 08D5     		bpl	.L3
  20:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         // we received an address byte
  21:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         if((data & 0xff) == 0x41) {
  83              		.loc 1 21 9 is_stmt 1 view .LVU15
  84              		.loc 1 21 18 is_stmt 0 view .LVU16
  85 0012 FF33     		adds	r3, r3, #255
  86 0014 1A40     		ands	r2, r3
  87              	.LVL3:
  88              		.loc 1 21 11 view .LVU17
  89 0016 412A     		cmp	r2, #65
  90 0018 06D1     		bne	.L2
  22:mcu-bsp/lib/src/viccom_stm32l0xx.c ****           // this is a packet for us
  23:mcu-bsp/lib/src/viccom_stm32l0xx.c ****           state->currentState = STATE_WAITING_FOR_LENGTH;
  91              		.loc 1 23 11 is_stmt 1 view .LVU18
  92              		.loc 1 23 31 is_stmt 0 view .LVU19
  93 001a 0A23     		movs	r3, #10
  94 001c FF33     		adds	r3, r3, #255
ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 3


  95 001e 403A     		subs	r2, r2, #64
  96 0020 C254     		strb	r2, [r0, r3]
  97 0022 01E0     		b	.L2
  98              	.LVL4:
  99              	.L3:
  24:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         } 
  25:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     } else if (state->currentState == STATE_WAITING_FOR_LENGTH && !(data & 0x100)) {
 100              		.loc 1 25 12 is_stmt 1 view .LVU20
 101              		.loc 1 25 15 is_stmt 0 view .LVU21
 102 0024 012B     		cmp	r3, #1
 103 0026 00D0     		beq	.L5
 104              	.LVL5:
 105              	.L2:
  26:mcu-bsp/lib/src/viccom_stm32l0xx.c ****       // this is a length value with correct address bit
  27:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         state->rxLength = data & 0xff;
  28:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         state->currentState = STATE_WAITING_FOR_CRC1;
  29:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     }
  30:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     // } else if (currentState == crclMode && !(data & 0x100)) {
  31:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //   // this is a crcl value with correct address bit
  32:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //     crcl = data & 0xff;
  33:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //     currentState = crch;
  34:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     // } else if (state->currentState == STATE_WAITING_FOR_CRC2 && !(data & 0x100)) {
  35:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //   // this is a crcl value with correct address bit
  36:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //     crch = data & 0xff;
  37:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //     currentState = payloadMode;
  38:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     // } else {
  39:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     //   currentState = addressMode;
  40:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     // }
  41:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  42:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  43:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     return;
  44:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  45:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  46:mcu-bsp/lib/src/viccom_stm32l0xx.c **** }
 106              		.loc 1 46 1 view .LVU22
 107              		@ sp needed
 108 0028 7047     		bx	lr
 109              	.LVL6:
 110              	.L5:
  25:mcu-bsp/lib/src/viccom_stm32l0xx.c ****       // this is a length value with correct address bit
 111              		.loc 1 25 64 discriminator 1 view .LVU23
 112 002a D305     		lsls	r3, r2, #23
 113 002c FCD4     		bmi	.L2
  27:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         state->currentState = STATE_WAITING_FOR_CRC1;
 114              		.loc 1 27 9 is_stmt 1 view .LVU24
  27:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         state->currentState = STATE_WAITING_FOR_CRC1;
 115              		.loc 1 27 32 is_stmt 0 view .LVU25
 116 002e FF23     		movs	r3, #255
 117 0030 1A40     		ands	r2, r3
 118              	.LVL7:
  27:mcu-bsp/lib/src/viccom_stm32l0xx.c ****         state->currentState = STATE_WAITING_FOR_CRC1;
 119              		.loc 1 27 25 view .LVU26
 120 0032 0533     		adds	r3, r3, #5
 121 0034 C250     		str	r2, [r0, r3]
  28:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     }
 122              		.loc 1 28 9 is_stmt 1 view .LVU27
  28:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     }
ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 4


 123              		.loc 1 28 29 is_stmt 0 view .LVU28
 124 0036 0A23     		movs	r3, #10
 125 0038 FF33     		adds	r3, r3, #255
 126 003a 0222     		movs	r2, #2
 127 003c C254     		strb	r2, [r0, r3]
  43:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
 128              		.loc 1 43 5 is_stmt 1 view .LVU29
 129 003e F3E7     		b	.L2
 130              	.L7:
 131              		.align	2
 132              	.L6:
 133 0040 00480040 		.word	1073760256
 134              		.cfi_endproc
 135              	.LFE43:
 137              		.section	.text.VICCOM_send,"ax",%progbits
 138              		.align	1
 139              		.global	VICCOM_send
 140              		.syntax unified
 141              		.code	16
 142              		.thumb_func
 143              		.fpu softvfp
 145              	VICCOM_send:
 146              	.LVL8:
 147              	.LFB44:
  47:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  48:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  49:mcu-bsp/lib/src/viccom_stm32l0xx.c **** void VICCOM_send(viccom_t* state, uint8_t* data, int len) {
 148              		.loc 1 49 59 view -0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 0
 151              		@ frame_needed = 0, uses_anonymous_args = 0
 152              		@ link register save eliminated.
  50:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     return;
 153              		.loc 1 50 5 view .LVU31
  51:mcu-bsp/lib/src/viccom_stm32l0xx.c **** }
 154              		.loc 1 51 1 is_stmt 0 view .LVU32
 155              		@ sp needed
 156 0000 7047     		bx	lr
 157              		.cfi_endproc
 158              	.LFE44:
 160              		.section	.text.VICCOM_getBuffer,"ax",%progbits
 161              		.align	1
 162              		.global	VICCOM_getBuffer
 163              		.syntax unified
 164              		.code	16
 165              		.thumb_func
 166              		.fpu softvfp
 168              	VICCOM_getBuffer:
 169              	.LVL9:
 170              	.LFB45:
  52:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  53:mcu-bsp/lib/src/viccom_stm32l0xx.c **** viccom_rx_t VICCOM_getBuffer(viccom_t* state) {
 171              		.loc 1 53 47 is_stmt 1 view -0
 172              		.cfi_startproc
 173              		@ args = 0, pretend = 0, frame = 0
 174              		@ frame_needed = 0, uses_anonymous_args = 0
 175              		@ link register save eliminated.
ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 5


  54:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     viccom_rx_t rx = {.data = state->rxData, .length = state->rxLength};
 176              		.loc 1 54 5 view .LVU34
 177              		.loc 1 54 31 is_stmt 0 view .LVU35
 178 0000 8B1C     		adds	r3, r1, #2
 179              		.loc 1 54 17 view .LVU36
 180 0002 0360     		str	r3, [r0]
 181              		.loc 1 54 61 view .LVU37
 182 0004 8223     		movs	r3, #130
 183 0006 5B00     		lsls	r3, r3, #1
 184 0008 CB58     		ldr	r3, [r1, r3]
 185 000a 4360     		str	r3, [r0, #4]
  55:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     state->dataAvailable = false;
 186              		.loc 1 55 5 is_stmt 1 view .LVU38
 187              		.loc 1 55 26 is_stmt 0 view .LVU39
 188 000c 8423     		movs	r3, #132
 189 000e 5B00     		lsls	r3, r3, #1
 190 0010 0022     		movs	r2, #0
 191 0012 CA54     		strb	r2, [r1, r3]
  56:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     return rx;
 192              		.loc 1 56 5 is_stmt 1 view .LVU40
  57:mcu-bsp/lib/src/viccom_stm32l0xx.c **** }
 193              		.loc 1 57 1 is_stmt 0 view .LVU41
 194              		@ sp needed
 195 0014 7047     		bx	lr
 196              		.cfi_endproc
 197              	.LFE45:
 199              		.section	.text.VICCOM_dataAvailable,"ax",%progbits
 200              		.align	1
 201              		.global	VICCOM_dataAvailable
 202              		.syntax unified
 203              		.code	16
 204              		.thumb_func
 205              		.fpu softvfp
 207              	VICCOM_dataAvailable:
 208              	.LVL10:
 209              	.LFB46:
  58:mcu-bsp/lib/src/viccom_stm32l0xx.c **** 
  59:mcu-bsp/lib/src/viccom_stm32l0xx.c **** bool VICCOM_dataAvailable(viccom_t* state) {
 210              		.loc 1 59 44 is_stmt 1 view -0
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 0
 213              		@ frame_needed = 0, uses_anonymous_args = 0
 214              		@ link register save eliminated.
  60:mcu-bsp/lib/src/viccom_stm32l0xx.c ****     return state->dataAvailable;
 215              		.loc 1 60 5 view .LVU43
 216              		.loc 1 60 17 is_stmt 0 view .LVU44
 217 0000 8423     		movs	r3, #132
 218 0002 5B00     		lsls	r3, r3, #1
 219 0004 C05C     		ldrb	r0, [r0, r3]
 220              	.LVL11:
  61:mcu-bsp/lib/src/viccom_stm32l0xx.c **** }...
 221              		.loc 1 61 1 view .LVU45
 222              		@ sp needed
 223 0006 7047     		bx	lr
 224              		.cfi_endproc
 225              	.LFE46:
 227              		.text
ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 6


 228              	.Letext0:
 229              		.file 2 "c:\\programdata\\chocolatey\\lib\\gcc-arm-embedded\\tools\\gcc-arm-none-eabi-10-2020-q4-m
 230              		.file 3 "c:\\programdata\\chocolatey\\lib\\gcc-arm-embedded\\tools\\gcc-arm-none-eabi-10-2020-q4-m
 231              		.file 4 "mcu-bsp/CMSIS/Device/ST/STM32L0xx/Include/stm32l011xx.h"
 232              		.file 5 "mcu-bsp/lib/src/../inc/viccom.h"
ARM GAS  C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 viccom_stm32l0xx.c
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:16     .text.VICCOM_stm_init:00000000 $t
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:24     .text.VICCOM_stm_init:00000000 VICCOM_stm_init
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:52     .text.VICCOM_uartHandler:00000000 $t
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:59     .text.VICCOM_uartHandler:00000000 VICCOM_uartHandler
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:133    .text.VICCOM_uartHandler:00000040 $d
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:138    .text.VICCOM_send:00000000 $t
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:145    .text.VICCOM_send:00000000 VICCOM_send
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:161    .text.VICCOM_getBuffer:00000000 $t
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:168    .text.VICCOM_getBuffer:00000000 VICCOM_getBuffer
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:200    .text.VICCOM_dataAvailable:00000000 $t
C:\Users\vic_user\AppData\Local\Temp\ccN65JJj.s:207    .text.VICCOM_dataAvailable:00000000 VICCOM_dataAvailable

NO UNDEFINED SYMBOLS
